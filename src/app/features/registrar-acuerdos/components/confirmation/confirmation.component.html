<div class="container2">
  <div class="title-container">
    <div class="icon-number">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-number-7">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M7 4h11l-7 16" />
      </svg>
    </div>
    <div class="title">Confirmación final</div>
  </div>

  <div class="confirmation-content">
    <!-- Datos del infractor -->
    <div class="confirmation-section">
      <div class="section-title">Datos del infractor</div>
      <div class="info-row" *ngIf="infractor; else noData">
        <div class="info-item">
          <div class="info-label">Nombre:</div>
          <div class="info-value">{{ infractor.nombreCompleto }}</div>
        </div>
        <div class="info-item">
          <div class="info-label">Documento:</div>
          <div class="info-value">{{ infractor.tipoDocumento.toUpperCase() }} {{ infractor.numeroDocumento }}</div>
        </div>
      </div>
      <ng-template #noData>
        <div class="info-value">No se ha seleccionado ningún infractor</div>
      </ng-template>
    </div>

    <div class="divider"></div>

    <!-- Infracciones seleccionadas -->
    <div class="confirmation-section">
      <div class="section-title">Infracciones seleccionadas</div>
      <div class="info-value">{{ selectedInfractions }} infracciones por total de {{ formatCurrency(totalAmount) }}
      </div>
    </div>

    <div class="divider"></div>

    <!-- Plan de cuotas -->
    <div class="confirmation-section">
      <div class="section-title">Plan de cuotas</div>
      <div class="info-row">
        <div class="info-item">
          <div class="info-label">Número de cuotas:</div>
          <div class="info-value">{{ numeroCuotas }} cuotas mensuales</div>
        </div>
        <div class="info-item">
          <div class="info-label">Valor por cuota:</div>
          <div class="info-value">{{ formatCurrency(valorCuota) }}</div>
        </div>
      </div>
    </div>
  </div>

  <div class="action-buttons">
    <button class="button-pdf" (click)="generatePDF()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-file-type-pdf">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M14 3v4a1 1 0 0 0 1 1h4" />
        <path d="M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4" />
        <path d="M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6" />
        <path d="M17 18h2" />
        <path d="M20 15h-3v6" />
        <path d="M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z" />
      </svg>
      <div class="label2">Generar PDF</div>
    </button>
    <button class="button-save" (click)="saveAcuerdo()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" />
        <path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" />
        <path d="M14 4l0 4l-6 0l0 -4" />
      </svg>
      <div class="label2">Guardar Acuerdo</div>
    </button>
  </div>
</div>

<!-- Confirmation Modal -->
<div class="modal-overlay" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
        <path d="M9 12l2 2l4 -4" />
      </svg>
    </div>

    <div class="modal-title">¡Acuerdo de pago guardado exitosamente!</div>
    <div class="modal-subtitle">El acuerdo ha sido registrado en el sistema</div>

    <div class="modal-info">
      <div class="modal-info-row">
        <div class="modal-info-label">Número de acuerdo:</div>
        <div class="modal-info-value">{{ acuerdoNumero }}</div>
      </div>
      <div class="modal-info-row">
        <div class="modal-info-label">Infractor:</div>
        <div class="modal-info-value">{{ infractor?.nombreCompleto || 'N/A' }}</div>
      </div>
      <div class="modal-info-row">
        <div class="modal-info-label">Total:</div>
        <div class="modal-info-value">{{ formatCurrency(totalAmount) }}</div>
      </div>
      <div class="modal-info-row">
        <div class="modal-info-label">Cuotas:</div>
        <div class="modal-info-value">{{ numeroCuotas }} cuotas mensuales</div>
      </div>
      <div class="modal-info-row">
        <div class="modal-info-label">Fecha:</div>
        <div class="modal-info-value">{{ fechaActual }}</div>
      </div>
    </div>

    <div class="modal-alert">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
        <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
        <path d="M12 9h.01" />
        <path d="M11 12h1v4h1" />
      </svg>
      <div class="modal-alert-text">
        El infractor recibirá una notificación por correo electrónico con los detalles del acuerdo y el cronograma de
        pagos.
      </div>
    </div>

    <div class="modal-buttons">
      <button class="modal-button-close" (click)="closeModal()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M18 6l-12 12" />
          <path d="M6 6l12 12" />
        </svg>
        <div class="label2">Cerrar</div>
      </button>
      <button class="modal-button-new" (click)="createNewAcuerdo()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M12 5l0 14" />
          <path d="M5 12l14 0" />
        </svg>
        <div class="label2">Nuevo Acuerdo</div>
      </button>
    </div>
  </div>
</div>
